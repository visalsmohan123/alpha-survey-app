"use strict";(self.webpackChunkalpha_survey_app=self.webpackChunkalpha_survey_app||[]).push([[660],{2660:(_,y,u)=>{u.r(y),u.d(y,{PubSurveyModule:()=>C});var p=u(6895),c=u(8010),i=u(433),a=u(6773),e=u(8256),v=u(4028);function m(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",7),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e._uU(6),e.qZA(),e.TgZ(7,"td",7)(8,"a",11),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.respondSurvey(l._id))}),e._UZ(9,"i",12),e._uU(10,"Respond"),e.qZA()()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.Survey_title),e.xp6(2),e.Oqu(t.Survey_description),e.xp6(2),e.Oqu(t.Survey_category)}}let g=(()=>{class r{constructor(t,s,o){this.repository=t,this.route=s,this.router=o}ngOnInit(){this.title=this.route.snapshot.data.title,this.repository.refresh()}get surveys(){return this.repository.getAllSurveys()}respondSurvey(t){this.router.navigateByUrl("/pubsurveys/respond/"+t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v.W),e.Y36(a.gz),e.Y36(a.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-survey-public-listing"]],decls:23,vars:1,consts:[[1,"body-background"],[1,"container"],[1,"row"],[1,"col-md-offset-1","col-md-10"],[1,"darkText"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","table-hover",2,"background-color","white"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"col-md-offset-1","col-md-10","text-center"],["id","myPager",1,"pagination","pagination-lg","pager"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa-thin","fa-block-question"]],template:function(t,s){1&t&&(e.TgZ(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Surveys"),e.qZA(),e._UZ(6,"br")(7,"br"),e.TgZ(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"Survey Title"),e.qZA(),e.TgZ(14,"th",7),e._uU(15,"Survey Description"),e.qZA(),e.TgZ(16,"th",7),e._uU(17,"Survey Category"),e.qZA(),e._UZ(18,"th",7),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,m,11,3,"tr",8),e.qZA()()(),e.TgZ(21,"div",9),e._UZ(22,"ul",10),e.qZA()()()()()),2&t&&(e.xp6(20),e.Q6J("ngForOf",s.surveys))},dependencies:[p.sg],styles:['.body-background[_ngcontent-%COMP%]{margin-top:-20px;height:100vh;background:hsla(154,100%,76%,1);background:linear-gradient(90deg,hsla(154,100%,76%,1) 0%,hsla(234,100%,83%,1) 50%,hsla(288,100%,81%,1) 100%);background:-webkit-linear-gradient(90deg,hsla(154,100%,76%,1) 0%,hsla(234,100%,83%,1) 50%,hsla(288,100%,81%,1) 100%);filter:progid: DXImageTransform.Microsoft.gradient(startColorstr="#84FFC9",endColorstr="#AAB2FF",GradientType=1)}']}),r})();var h=u(5700);class f{constructor(n,t,s){this._id=n,this.SurveyId=t,this.Question=s}toString(){return`\n      SurveyQuestions\n      -------------------------------\n      Id         : ${this._id}\n      Survey_id      : ${this.SurveyId}\n      Survey_Question      : ${this.Question}\n      `}}var b=u(3236);function S(r,n){if(1&r&&(e.TgZ(0,"div",10)(1,"div"),e._UZ(2,"input",11),e.qZA(),e.TgZ(3,"div"),e._UZ(4,"input",12),e.qZA(),e._UZ(5,"p"),e.qZA()),2&r){const t=n.index,s=e.oxw();e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("value",s.demo[t].Question)("readonly",!0)}}const T=a.Bz.forChild([{path:"list",component:g,data:{title:"Surveys"}},{path:"respond/:id",component:(()=>{class r{constructor(t,s,o,l,d){this.formBuilder=t,this.repository=s,this.pubSurveyRepositroy=o,this.router=l,this.activeRoute=d,this.editing=!1,this.surveyQuestions=new f,this.surveys=new h.s,this.enableSubmission=!1,this.demo=[]}ngOnInit(){this.editing=!0,this.editing&&(Object.assign(this.surveys,this.repository.getSurvey(this.activeRoute.snapshot.params.id)),this.surveyResponseForm=this.formBuilder.group({questions:this.formBuilder.array([]),responses:this.formBuilder.array([])}),this.populateData(this.surveys.Survey_id))}onSubmit(){this.pubSurveyRepositroy.createResponses(this.surveyResponseForm.value),this.router.navigateByUrl("/pubsurveys/list")}returnToSurveyList(){this.router.navigateByUrl("/pubsurveys/list")}questions(){return this.surveyResponseForm.get("questions")}responses(){return this.surveyResponseForm.get("responses")}newQuestion(){return this.formBuilder.group({question:""})}newResponse(){return this.formBuilder.group({response:""})}addQuestions(){this.questions().push(this.newQuestion())}populateData(t){this.repository.getSurveyQuestions(t).subscribe(s=>{console.log(s),s.forEach(o=>{this.demo.push(o),this.responses().push(this.formBuilder.group({response:"",question:o.Question,questionId:o._id,surveyId:o.SurveyId})),this.questions().push(this.formBuilder.group({question:o.Question,questionId:o._id,surveyId:o.SurveyId}))}),console.log(this.demo)})}returnToPublicSurveyList(){this.router.navigateByUrl("/pubsurveys/list")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(b.a),e.Y36(v.W),e.Y36(a.F0),e.Y36(a.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-survey-response"]],decls:15,vars:3,consts:[[1,"body-background"],[1,"container"],[1,"row"],[1,"offset-md-3","col-md-6"],[1,"form",3,"formGroup","ngSubmit"],["formArrayName","responses",1,"form-group","mb-3"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-center"],["type","reset",1,"btn","btn-secondary","m-3",3,"click"],["type","submit",1,"btn","btn-primary","m-3"],[3,"formGroupName"],["type","text",1,"form-control",2,"width","100% !important",3,"value","readonly"],["type","text","formControlName","response",1,"form-control",2,"width","100% !important"]],template:function(t,s){1&t&&(e.TgZ(0,"body",0)(1,"main",1)(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5,"Respond to Survey"),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(8,"div",5),e.YNc(9,S,6,3,"div",6),e.qZA(),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return s.returnToPublicSurveyList()}),e._uU(12," Cancel "),e.qZA(),e.TgZ(13,"button",9),e._uU(14,"Save"),e.qZA()()()()()()()),2&t&&(e.xp6(7),e.Q6J("formGroup",s.surveyResponseForm),e.xp6(2),e.Q6J("ngForOf",s.responses().controls)("ngForOf",s.demo))},dependencies:[p.sg,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE],styles:['.body-background[_ngcontent-%COMP%]{margin-top:-20px;height:100vh;background:hsla(154,100%,76%,1);background:linear-gradient(90deg,hsla(154,100%,76%,1) 0%,hsla(234,100%,83%,1) 50%,hsla(288,100%,81%,1) 100%);background:-webkit-linear-gradient(90deg,hsla(154,100%,76%,1) 0%,hsla(234,100%,83%,1) 50%,hsla(288,100%,81%,1) 100%);filter:progid: DXImageTransform.Microsoft.gradient(startColorstr="#84FFC9",endColorstr="#AAB2FF",GradientType=1)}']}),r})(),data:{title:"Surveys"}}]);let C=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.k,p.ez,i.u5,i.UX,T]}),r})()}}]);